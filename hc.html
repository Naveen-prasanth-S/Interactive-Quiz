<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>HTML & CSS Quiz</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      background-color: #1c0717;
      color: white;
      font-family: 'Segoe UI', sans-serif;
      padding: 20px;
    }
    .quiz-container {
      max-width: 800px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.05);
      padding: 30px;
      border-radius: 20px;
    }
    .option {
      background-color: #3b0a32;
      padding: 12px;
      border-radius: 10px;
      margin-bottom: 10px;
      cursor: pointer;
    }
    .option.correct {
      background-color: #198754;
    }
    .option.wrong {
      background-color: #dc3545;
    }
    .option.disabled {
      pointer-events: none;
      opacity: 0.6;
    }
    #nextBtn {
      display: none;
    }
    #result {
      display: none;
    }
  </style>
</head>
<body>
  <div class="quiz-container">
    <h2 class="text-center text-warning mb-4">HTML & CSS Quiz</h2>
    <div id="quizBox">
      <h4 id="question"></h4>
      <div id="options"></div>
      <button id="nextBtn" class="btn btn-success mt-3">Next</button>
    </div>

    <div id="result" class="text-center">
      <h3 class="text-success">Quiz Completed!</h3>
      <p id="scoreText" class="fs-5"></p>
      <canvas id="barChart" height="200"></canvas>
      <a href="browse.html" class="btn btn-warning mt-4">Back to Browse</a>
    </div>
  </div>

  <script>
    const questions = [
      { q: "What does HTML stand for?", o: ["Hyper Trainer Marking Language", "Hyper Text Markup Language", "Hyper Text Marketing Language", "Hyper Tool Markup Language"], a: 1 },
      { q: "Which HTML tag is used to create a hyperlink?", o: ["<a>", "<link>", "<href>", "<hyperlink>"], a: 0 },
      { q: "How can you make a numbered list in HTML?", o: ["<ul>", "<ol>", "<li>", "<list>"], a: 1 },
      { q: "Which tag is used to insert an image?", o: ["<img>", "<image>", "<src>", "<pic>"], a: 0 },
      { q: "What does CSS stand for?", o: ["Computer Style Sheet", "Creative Style System", "Cascading Style Sheets", "Colorful Style Sheet"], a: 2 },
      { q: "Which property is used to change text color in CSS?", o: ["font-color", "color", "text-color", "background-color"], a: 1 },
      { q: "Which HTML tag is used for the largest heading?", o: ["<h6>", "<h1>", "<head>", "<heading>"], a: 1 },
      { q: "How do you apply an external CSS file to HTML?", o: ["<css src='style.css'>", "<style href='style.css'>", "<link rel='stylesheet' href='style.css'>", "<script src='style.css'>"], a: 2 },
      { q: "Which CSS property controls the font size?", o: ["text-size", "font-style", "font-size", "size"], a: 2 },
      { q: "What is the default display value of a <div> element?", o: ["inline", "block", "inline-block", "flex"], a: 1 }
    ];

    let current = 0;
    let score = 0;
    let results = [];

    const qText = document.getElementById("question");
    const optionsBox = document.getElementById("options");
    const nextBtn = document.getElementById("nextBtn");
    const resultBox = document.getElementById("result");
    const scoreText = document.getElementById("scoreText");

    function showQuestion() {
      const q = questions[current];
      qText.textContent = `Q${current + 1}. ${q.q}`;
      optionsBox.innerHTML = "";
      nextBtn.style.display = "none";
      q.o.forEach((opt, i) => {
        const div = document.createElement("div");
        div.className = "option";
        div.textContent = opt;
        div.onclick = () => checkAnswer(i, div);
        optionsBox.appendChild(div);
      });
    }

    function checkAnswer(selected, element) {
      const correct = questions[current].a;
      const allOptions = document.querySelectorAll(".option");
      allOptions.forEach(opt => opt.classList.add("disabled"));
      if (selected === correct) {
        element.classList.add("correct");
        score++;
        results.push(1);
      } else {
        element.classList.add("wrong");
        allOptions[correct].classList.add("correct");
        results.push(0);
      }
      nextBtn.style.display = "inline-block";
    }

    nextBtn.onclick = () => {
      current++;
      if (current < questions.length) {
        showQuestion();
      } else {
        showResult();
      }
    }

    function showResult() {
      document.getElementById("quizBox").style.display = "none";
      resultBox.style.display = "block";
      scoreText.innerHTML = `You answered <span class="text-warning">${score}</span> out of <span class="text-warning">${questions.length}</span> correctly.<br>Your performance shows ${score >= 8 ? 'excellent knowledge!' : score >= 5 ? 'good understanding.' : 'a need for more practice.'}`;

      const ctx = document.getElementById('barChart').getContext('2d');
      new Chart(ctx, {
        type: 'bar',
        data: {
          labels: questions.map((q, i) => `Q${i + 1}`),
          datasets: [{
            label: 'Correct (1) / Wrong (0)',
            data: results,
            backgroundColor: results.map(r => r ? '#198754' : '#dc3545')
          }]
        },
        options: {
          scales: {
            y: {
              beginAtZero: true,
              ticks: { stepSize: 1, precision: 0 }
            }
          }
        }
      });
    }

    showQuestion();
  </script>
</body>
</html>
